<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feedback - FreelanceHub</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand fw-bold text-light" href="index.html">
        <i class="bi bi-stars"></i> FreelanceHub
      </a>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav align-items-center">
          <li class="nav-item"><a class="nav-link text-info" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link text-success" href="explore.html">Explore</a></li>
          <li class="nav-item"><a class="nav-link text-primary" href="gigs.html">Gigs</a></li>
          <li class="nav-item"><a class="nav-link text-danger active" href="feedback.html">Feedback</a></li>
          <li class="nav-item"><a class="btn btn-danger ms-2" href="signup.html">Sign Up</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <header class="bg-primary text-white text-center py-5 mt-5">
    <div class="container">
      <h1><i class="bi bi-chat-dots-fill"></i> Share Your Feedback</h1>
      <p class="lead">We value your thoughts and suggestions to improve FreelanceHub.</p>
    </div>
  </header>

  <!-- Feedback Form -->
<section class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow p-4">
        <h4 class="mb-3"><i class="bi bi-pencil-square"></i> Submit Feedback</h4>
        <form id="feedbackForm">
          <div class="mb-3">
            <label for="name" class="form-label">Your Name</label>
            <input type="text" class="form-control" id="name" placeholder="Enter your name" required>
          </div>
          <div class="mb-3">
            <label for="message" class="form-label">Your Feedback</label>
            <textarea class="form-control" id="message" rows="3" placeholder="Write your feedback..." required></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Rating</label>
            <select id="rating" class="form-select" required>
              <option value="">Select rating</option>
              <option value="1">1 ★</option>
              <option value="2">2 ★★</option>
              <option value="3">3 ★★★</option>
              <option value="4">4 ★★★★</option>
              <option value="5">5 ★★★★★</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary w-100"><i class="bi bi-send-fill"></i> Submit</button>
        </form>
        <p id="feedbackMsg" class="mt-2"></p>
      </div>
    </div>
  </div>
</section>

<!-- Feedback List -->
<section class="container my-5">
  <h3 class="mb-4 text-center"><i class="bi bi-chat-left-text-fill"></i> Recent Feedback</h3>
  <div id="feedbackList" class="row justify-content-center"></div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.getElementById("feedbackForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const name = document.getElementById("name").value.trim();
  const message = document.getElementById("message").value.trim();
  const rating = document.getElementById("rating").value;

  try {
    const res = await fetch("http://localhost:5000/api/feedback", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        name,
        message,
        rating,
      }),
    });

    const data = await res.json();

    if (res.ok) {
      alert("✅ Feedback submitted successfully!");
      document.getElementById("feedbackForm").reset();
    } else {
      alert("❌ " + (data.message || "Failed to submit feedback"));
    }
  } catch (err) {
    console.error(err);
    alert("⚠️ Something went wrong!");
  }
});
</script>


</body>
</html>
